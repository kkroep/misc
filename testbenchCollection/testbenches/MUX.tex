\subsection*{4-bit Multiplexer and Demultiplexer}

\begin{figure}[H]
\centering
\tikzstyle{dot} = [draw,shape=circle,fill=black, scale =.3]
\begin{tikzpicture}

% and row
\draw (3,3) node [and port, scale=.75, rotate = -90] (and1) at (3,3) {};
\draw (1.5,3) node [and port, scale=.75, rotate = -90] (and2) at (2,3) {};
\draw (1.5,3) node [and port, scale=.75, rotate = -90] (and3) at (1,3) {};
\draw (0,3) node [and port, scale=.75, rotate = -90] (and4) at (0,3) {};

% or with connections
\draw (3,3) node [or port, scale=.75, rotate = -90] (or3) at (1.5,1.75) {};
\draw
(and2.out) -| (1.58,2.45)
(and3.out) -| (1.42,2.45)
(and4.out) -- (0,2.8) -| (or3.in 2)
(and1.out) -- (3,2.8) -| (or3.in 1);

% selection lines lines
\draw (3,3) node [not port, scale=.35] (buf1) at (-0.75,4.75) {};
\draw (3,3) node [not port, scale=.35] (buf2) at (-0.75,4.25) {};
\draw (-1,5) |- (buf1.in);
\draw (-1.125,5) -| (and3.in 1);
\draw (buf1.out) -| (and1.in 1);
\draw (-1,4.5) |- (buf2.in);
\draw (-1.125,4.5) -| (and2.in 2);
\draw (buf2.out) -| (and1.in 2);

%selection connection
\draw (2.2,4.75)--(and2.in 1); \node[dot] at (2.2,4.75) {};
\draw (0.2,5)--(and4.in 1); \node[dot] at (0.2,5) {};
\draw (0.79,4.25)--(and3.in 2); \node[dot] at (0.79,4.25) {};
\draw (-0.22,4.5)--(and4.in 2); \node[dot] at (-0.22,4.5) {};

%source
\draw (1.5,3) node [buffer,scale = .6, rotate = -90] (buf) at (1.5,5.75) {};
\draw
(buf.out) -| (0,3.88)
(buf.out) -| (1,3.88)
(buf.out) -| (2,3.88)
(buf.out) -| (3,3.88);

% labels
\node[anchor=east] at (-1.125,5) {sel[0]};
\node[anchor=east] at (-1.125,4.5) {sel[1]};
\node[anchor=south] at (1.5,6.125) {IN};
\node at (1.5,1.5) {OUT};

% and row
\draw (9.75,3) node [and port, scale=.75, rotate = -90] (and1) at (9.75,3) {};
\draw (8.25,3) node [and port, scale=.75, rotate = -90] (and2) at (8.75,3) {};
\draw (8.25,3) node [and port, scale=.75, rotate = -90] (and3) at (7.75,3) {};
\draw (6.75,3) node [and port, scale=.75, rotate = -90] (and4) at (6.75,3) {};

% selection lines lines
\draw (9.75,3) node [not port, scale=.35] (buf1) at (6,4.75) {};
\draw (9.75,3) node [not port, scale=.35] (buf2) at (6,4.25) {};
\draw (5.75,5) |- (buf1.in);
\draw (5.625,5) -| (and3.in 1);
\draw (buf1.out) -| (and1.in 1);
\draw (5.75,4.5) |- (buf2.in);
\draw (5.625,4.5) -| (and2.in 2);
\draw (buf2.out) -| (and1.in 2);

%selection connection
\draw (8.95,4.75)--(and2.in 1); \node[dot] at (8.95,4.75) {};
\draw (6.95,5)--(and4.in 1); \node[dot] at (6.95,5) {};
\draw (7.54,4.25)--(and3.in 2); \node[dot] at (7.54,4.25) {};
\draw (6.53,4.5)--(and4.in 2); \node[dot] at (6.53,4.5) {};

%source
\draw (8.25,3) node [buffer,scale = .6, rotate = -90] (buf) at (8.25,5.75) {};
\draw
(buf.out) -| (6.75,3.88)
(buf.out) -| (7.75,3.88)
(buf.out) -| (8.75,3.88)
(buf.out) -| (9.75,3.88);

%outputs
\draw (and4.out) -- (6.75,1.75); \node at (6.75,1.5) {\tiny{OUT[0]}};
\draw (and3.out) -- (7.75,1.75); \node at (7.75,1.5) {\tiny{OUT[1]}};
\draw (and2.out) -- (8.75,1.75); \node at (8.75,1.5) {\tiny{OUT[2]}};
\draw (and1.out) -- (9.75,1.75); \node at (9.75,1.5) {\tiny{OUT[3]}};

% labels
\node[anchor=east] at (5.625,5) {sel[0]};
\node[anchor=east] at (5.625,4.5) {sel[1]};
\node[anchor=south] at (8.25,6.125) {IN};
\end{tikzpicture}


\caption{MUX}
\label{tkz:MUX}
\end{figure}
